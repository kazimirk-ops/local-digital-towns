# ============================================================
# Local Digital Towns - Environment Configuration
# ============================================================
# Copy this file to .env and fill in your values.
# Never commit .env to version control!
#
# Required fields are marked with [REQUIRED].
# Optional fields can be left empty until needed.
# ============================================================

# ============ APPLICATION [REQUIRED] ============

# Environment: "development" or "production"
NODE_ENV=development

# Port the server listens on
PORT=3000

# Town identity - must match a key in config/town-config.json
TOWN_SLUG=your-town

# Display name (used in logs and admin)
TOWN_NAME=Your Town Name

# [REQUIRED] Public-facing base URL (no trailing slash)
PUBLIC_BASE_URL=http://localhost:3000

# Set to "true" to block all access during maintenance
LOCKDOWN_MODE=false

# ============ DATABASE [REQUIRED] ============

# PostgreSQL connection string
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://localhost:5432/digitaltowns

# ============ REDIS ============

# Redis connection string for caching and sessions
# Format: redis://user:password@host:port
REDIS_URL=redis://localhost:6379

# ============ SECURITY [REQUIRED] ============

# Session secret - generate with: openssl rand -hex 32
SESSION_SECRET=

# JWT secret for auth tokens - generate with: openssl rand -hex 32
JWT_SECRET=

# JWT token expiration (e.g. "7d", "24h")
JWT_EXPIRES_IN=7d

# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:3000

# ============ STRIPE PAYMENTS [REQUIRED for marketplace] ============

# Get API keys from https://dashboard.stripe.com/apikeys
# Use sk_test_... keys for development
STRIPE_SECRET_KEY=

# Webhook signing secret from Stripe Dashboard > Webhooks
STRIPE_WEBHOOK_SECRET=

# Price IDs - create in Stripe Dashboard > Products
# Business subscription monthly price (e.g. $10/month)
STRIPE_BUSINESS_PRICE_ID=
STRIPE_PRICE_ID=

# Payment redirect URLs ({ORDER_ID} is replaced at runtime)
STRIPE_SUCCESS_URL=http://localhost:3000/pay/success?orderId={ORDER_ID}
STRIPE_CANCEL_URL=http://localhost:3000/pay/cancel?orderId={ORDER_ID}

# ============ EMAIL (SMTP) [REQUIRED for login codes] ============

# SMTP server settings for transactional emails (login codes, notifications)
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=

# "From" address for outbound emails
EMAIL_FROM=noreply@yourtowndomain.com

# Alternative: Resend API (if not using SMTP)
RESEND_API_KEY=

# Admin notification recipients (comma-separated)
ADMIN_NOTIFICATION_EMAIL=
ADMIN_NOTIFY_EMAILS=

# ============ FILE STORAGE (Cloudflare R2) ============

# Cloudflare R2 credentials for image/file uploads
# Get from Cloudflare Dashboard > R2 > Manage R2 API Tokens
R2_ACCOUNT_ID=
R2_ACCESS_KEY_ID=
R2_SECRET_ACCESS_KEY=
R2_BUCKET=your-town-assets
R2_PUBLIC_BASE_URL=

# Legacy S3 config (if not using R2)
S3_BUCKET=
S3_REGION=us-east-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# ============ BACKUPS (Backblaze B2) ============

# For automated database backups
B2_KEY_ID=
B2_APP_KEY=
B2_BUCKET_NAME=
BACKUP_ENCRYPTION_KEY=
BACKUP_SCHEDULE=0 2 * * *

# ============ OAUTH (OPTIONAL) ============

# Facebook Login - get from https://developers.facebook.com/apps/
FACEBOOK_APP_ID=
FACEBOOK_APP_SECRET=
FACEBOOK_CALLBACK_URL=http://localhost:3000/auth/facebook/callback

# Google Login - get from https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_CALLBACK_URL=http://localhost:3000/auth/google/callback

# ============ HUBSPOT CRM (OPTIONAL) ============

HUBSPOT_API_KEY=
HUBSPOT_PORTAL_ID=

# ============ CLOUDFLARE CALLS (OPTIONAL) ============

# For live streaming feature
CF_CALLS_APP_ID=
CF_CALLS_APP_SECRET=
CF_CALLS_BASE_URL=https://api.cloudflare.com/client/v4

# ============ ADMIN [REQUIRED] ============

# Comma-separated admin email addresses (these users get admin access)
ADMIN_EMAILS=

# Optional passphrase for admin login
ADMIN_LOGIN_PASSPHRASE=

# ============ INTERNAL SERVICES ============

AUTH_SERVICE_URL=http://auth-service:3002
CRM_SERVICE_URL=http://crm-service:3001

# ============ SWEEPSTAKES ============

SWEEP_TEST_MODE=false
SWEETSTAKE_ANNOUNCE_CHANNEL_ID=

# ============ DEBUG ============

# Show auth codes in console (development only!)
SHOW_AUTH_CODE=false

# ============ MONITORING ============

# Sentry error tracking - get DSN from https://sentry.io
SENTRY_DSN=
SENTRY_FORCE_ENABLE=false
