<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Business Subscription - Digital Sebastian</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;700&family=Sora:wght@400;600;800&display=swap" />
  <link rel="stylesheet" href="/ui-kit.css?v=1">
  <link rel="stylesheet" href="/business_subscription.css?v=1">
</head>
<body data-town="sebastian">
  <header class="topbar">
    <div class="topbar-inner">
      <a class="nav-btn" href="/ui">â† Back to Town</a>
      <div class="row">
        <select id="storeSelect" class="store-select">
          <option value="">Select your store...</option>
        </select>
        <a id="viewStoreLink" href="#" class="nav-btn" style="display:none;">View Store</a>
      </div>
    </div>
  </header>

  <main class="wrap">
    <div class="hero">
      <h1 class="hero-title">Business Subscription</h1>
      <p class="hero-subtitle">Manage your store's subscription and unlock all features</p>
    </div>

    <div id="loadingState" class="loading">Loading your stores...</div>

    <div id="noStoresState" class="no-stores card" style="display:none;">
      <div class="no-stores-icon">ğŸª</div>
      <h3>No Stores Found</h3>
      <p class="muted">You don't own any stores yet. Apply for a business account to get started.</p>
      <div class="btn-group">
        <a href="/apply/business" class="btn btn-primary">Apply for Business</a>
      </div>
    </div>

    <div id="mainContent" style="display:none;">
      <div id="errorMsg" class="error-msg" style="display:none;"></div>
      <div id="successMsg" class="success-msg" style="display:none;"></div>

      <!-- Subscription Status Card -->
      <div id="statusCard" class="card status-card none">
        <div class="status-header">
          <span id="statusBadge" class="status-badge none">No Subscription</span>
          <span id="planBadge" class="plan-badge">â€”</span>
        </div>
        <div class="status-icon" id="statusIcon">ğŸ“‹</div>
        <h2 id="statusTitle" class="status-title">Start Your Free Trial</h2>
        <p id="statusSubtitle" class="status-subtitle">Get 30 days free to try all features</p>

        <div id="statusDetails" class="status-details" style="display:none;">
          <div class="detail-row">
            <span class="detail-label">Plan</span>
            <span id="detailPlan" class="detail-value">â€”</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Status</span>
            <span id="detailStatus" class="detail-value">â€”</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Start Date</span>
            <span id="detailStartDate" class="detail-value">â€”</span>
          </div>
          <div class="detail-row">
            <span class="detail-label" id="endDateLabel">End Date</span>
            <span id="detailEndDate" class="detail-value">â€”</span>
          </div>
          <div class="detail-row highlight" id="daysRemainingRow">
            <span class="detail-label">Days Remaining</span>
            <span id="detailDaysRemaining" class="detail-value days-count">â€”</span>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div id="actionButtons" class="card action-card">
        <!-- No Subscription -->
        <div id="noSubActions" class="action-section">
          <h3 class="card-title">Get Started Today</h3>
          <p class="muted">First month FREE, then $49.99/month â€” credit card required, cancel anytime</p>
          <div class="btn-group">
            <button id="startTrialBtn" class="btn btn-primary btn-lg">
              <span class="btn-icon">ğŸš€</span> Start 30-Day Free Trial
            </button>
          </div>
        </div>

        <!-- Trial Active -->
        <div id="trialActiveActions" class="action-section" style="display:none;">
          <h3 class="card-title">Upgrade Your Plan</h3>
          <p class="muted">Love the features? Upgrade to continue after your trial ends.</p>
          <div class="price-tag">
            <span class="price-amount">$49.99</span>
            <span class="price-period">/month</span>
          </div>
          <div class="btn-group">
            <button id="upgradeBtn" class="btn btn-primary btn-lg">
              <span class="btn-icon">â¬†ï¸</span> Upgrade to Paid â€” $49.99/month
            </button>
          </div>
          <p class="muted" style="margin-top:12px;">Cancel anytime. No long-term commitment.</p>
        </div>

        <!-- Paid Active -->
        <div id="paidActiveActions" class="action-section" style="display:none;">
          <h3 class="card-title">Manage Subscription</h3>
          <p class="muted">Your subscription is active and will renew automatically.</p>
          <div class="btn-group">
            <button id="manageBtn" class="btn btn-secondary">
              <span class="btn-icon">âš™ï¸</span> Manage Subscription
            </button>
            <a href="#" id="storeSettingsLink" class="btn btn-secondary">
              <span class="btn-icon">ğŸª</span> Store Settings
            </a>
          </div>
          <div class="cancel-link-wrap">
            <a href="#" id="cancelLink" class="cancel-link">Cancel subscription</a>
          </div>
        </div>

        <!-- Expired -->
        <div id="expiredActions" class="action-section" style="display:none;">
          <h3 class="card-title">Reactivate Your Subscription</h3>
          <p class="muted">Your subscription has expired. Reactivate to continue using all features.</p>
          <div class="expired-warning">
            <span class="warning-icon">âš ï¸</span>
            <span>Your store features are currently limited</span>
          </div>
          <div class="btn-group">
            <button id="reactivateBtn" class="btn btn-primary btn-lg">
              <span class="btn-icon">ğŸ”„</span> Reactivate â€” $49.99/month
            </button>
          </div>
        </div>
      </div>

      <!-- Benefits -->
      <div class="card">
        <h3 class="card-title">Subscription Benefits</h3>
        <p class="muted">Everything included with your subscription:</p>
        <div class="benefits-grid" id="benefitsGrid">
          <div class="benefit-item" data-benefit="listing">
            <span class="benefit-check">âœ“</span>
            <div class="benefit-content">
              <strong>Store Listing</strong>
              <span>Your business listed on Digital Sebastian</span>
            </div>
          </div>
          <div class="benefit-item" data-benefit="selling">
            <span class="benefit-check">âœ“</span>
            <div class="benefit-content">
              <strong>Sell on Marketplace</strong>
              <span>List products, accept orders & payments</span>
            </div>
          </div>
          <div class="benefit-item" data-benefit="events">
            <span class="benefit-check">âœ“</span>
            <div class="benefit-content">
              <strong>Post Events</strong>
              <span>Promote events to the community</span>
            </div>
          </div>
          <div class="benefit-item" data-benefit="giveaways">
            <span class="benefit-check">âœ“</span>
            <div class="benefit-content">
              <strong>Giveaways + Front Page Exposure</strong>
              <span>Donate prizes, get featured on homepage</span>
            </div>
          </div>
          <div class="benefit-item" data-benefit="analytics">
            <span class="benefit-check">âœ“</span>
            <div class="benefit-content">
              <strong>Analytics Dashboard</strong>
              <span>Track views, orders, and engagement</span>
            </div>
          </div>
          <div class="benefit-item" data-benefit="messaging">
            <span class="benefit-check">âœ“</span>
            <div class="benefit-content">
              <strong>Customer Messaging</strong>
              <span>Direct communication with buyers</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Earn Free Months -->
      <div class="card giveaway-card">
        <div class="giveaway-header">
          <span class="giveaway-icon">ğŸ</span>
          <div>
            <h3 class="card-title">Earn Free Months + Front Page Exposure</h3>
            <p class="muted">Get subscription credit AND featured placement by participating in our giveaway program</p>
          </div>
        </div>
        <div class="giveaway-content">
          <div class="giveaway-steps">
            <div class="giveaway-step">
              <span class="step-num">1</span>
              <span>Submit a prize offer (product, service, or gift card)</span>
            </div>
            <div class="giveaway-step">
              <span class="step-num">2</span>
              <span>We review and approve your offer with a giveaway period</span>
            </div>
            <div class="giveaway-step">
              <span class="step-num">3</span>
              <span>Get 1 FREE month added to your subscription</span>
            </div>
            <div class="giveaway-step">
              <span class="step-num">4</span>
              <span>Your store is FEATURED on the front page during the active giveaway</span>
            </div>
          </div>
          <div style="margin:16px 0; padding:12px; background:rgba(34,211,238,0.1); border-radius:10px; border:1px solid rgba(34,211,238,0.2);">
            <div style="font-weight:600; color:#67e8f9;">Front Page Featured Stores</div>
            <div class="muted" style="margin-top:4px;">While your giveaway is active, your store appears in the "Featured Stores" section on the homepage â€” driving more traffic and visibility to your business!</div>
          </div>
          <div class="btn-group">
            <a id="giveawayOfferLink" href="/giveaway-offer" class="btn btn-giveaway">
              <span class="btn-icon">ğŸ</span> Submit Giveaway Offer
            </a>
          </div>
        </div>
      </div>

      <!-- Payment History -->
      <div class="card" id="paymentHistoryCard" style="display:none;">
        <h3 class="card-title">Payment History</h3>
        <div id="paymentHistoryLoading" class="muted">Loading payment history...</div>
        <div id="paymentHistoryEmpty" class="muted" style="display:none;">No payment history yet.</div>
        <table id="paymentHistoryTable" class="payment-table" style="display:none;">
          <thead>
            <tr>
              <th>Date</th>
              <th>Description</th>
              <th>Amount</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody id="paymentHistoryBody"></tbody>
        </table>
      </div>
    </div>
  </main>

  <!-- Cancel Confirmation Modal -->
  <div id="cancelModal" class="modal-overlay" style="display:none;">
    <div class="modal">
      <h3 class="modal-title">Cancel Subscription?</h3>
      <p class="modal-body">
        Are you sure you want to cancel your subscription? You'll continue to have access until the end of your current billing period.
      </p>
      <div class="modal-actions">
        <button id="keepSubBtn" class="btn btn-secondary">Keep Subscription</button>
        <button id="confirmCancelBtn" class="btn btn-danger">Yes, Cancel</button>
      </div>
    </div>
  </div>

  <script src="/theme.js?v=1"></script>
  <script src="/business_subscription.js?v=4"></script>
</body>
</html>
